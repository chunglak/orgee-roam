#+title: Testo
#+property: header-args:jupyter-python :kernel orgee-roam :session testo

* Init
#+begin_src jupyter-python :async yes
import logging, sys, time
from IPython import get_ipython

# Display stderr messages in output
sys.stderr = sys.stdout
# Setup root logger format
logging.basicConfig(
    level=logging.INFO,  # default is WARNING
    format="%(asctime)s-%(module)s[%(funcName)s:%(lineno)s]\n"
    "%(levelname)s-%(message)s",
)
# Enable auto-reload of imported code
ipy = get_ipython()
if "IPython.extensions.autoreload" not in sys.modules:
    ipy.run_line_magic("load_ext", "autoreload")
# Set external code to reload before each exec
ipy.run_line_magic("autoreload", "2")


def runf(func):
    t0 = time.time()
    r = func()
    print(f"Task finished in {time.time()-t0:.2f}s")
    return r


print("Init done")
#+end_src

#+RESULTS:
: Init done

* Zettelkasten
#+begin_src jupyter-python :async yes
def func():
    # pylint: disable=import-outside-toplevel
    from orgee_roam import ZettelKasten

    zk = ZettelKasten()
    zs = zk.zettels
    print(len(list(zs)))


runf(func)  # pylint: disable=undefined-variable
#+end_src

#+RESULTS:
: 2022-12-27 08:30:55,039-update_cache[update_cache:51]
: INFO-Removing «Orgee-Roam-ExtData»
: 2022-12-27 08:30:55,290-update_cache[update_cache:90]
: INFO-Updated «Orgee-Roam»
: 2022-12-27 08:30:55,294-update_cache[update_cache:90]
: INFO-Updated «Main Index»
: 2022-12-27 08:30:55,302-update_cache[update_cache:90]
: INFO-Updated «Nippon Steel [日本製鉄]»
: 2022-12-27 08:30:55,306-update_cache[update_cache:90]
: INFO-Updated «COMPAGNIE DE SAINT-GOBAIN»
: 2022-12-27 08:30:55,311-update_cache[update_cache:90]
: INFO-Updated «Occidental Petroleum Corp.»
: 2022-12-27 08:30:55,316-update_cache[update_cache:90]
: INFO-Updated «SUMCO CORP»
: 2022-12-27 08:30:55,322-update_cache[update_cache:90]
: INFO-Updated «CANON INC»
: 2022-12-27 08:30:55,326-update_cache[update_cache:90]
: INFO-Updated «Mitsubishi [三菱商事]»
: 2022-12-27 08:30:55,333-update_cache[update_cache:90]
: INFO-Updated «Bridgestone Corp.»
: 2022-12-27 08:30:55,337-update_cache[update_cache:90]
: INFO-Updated «WALMART INC»
: 2022-12-27 08:30:55,342-update_cache[update_cache:90]
: INFO-Updated «Mitsui & Co. [三井物産]»
: 2022-12-27 08:30:55,346-update_cache[update_cache:90]
: INFO-Updated «KEIO CORP»
: 2022-12-27 08:30:55,350-update_cache[update_cache:90]
: INFO-Updated «NTT [日本電信電話]»
: 2022-12-27 08:30:55,354-update_cache[update_cache:90]
: INFO-Updated «Sotetsu Holdings [相模鉄道株式会社]»
: 2022-12-27 08:30:55,358-update_cache[update_cache:90]
: INFO-Updated «TAKASHIMAYA CO LTD»
: 2022-12-27 08:30:55,362-update_cache[update_cache:90]
: INFO-Updated «KURARAY CO LTD»
: 2022-12-27 08:30:55,367-update_cache[update_cache:90]
: INFO-Updated «Unicharm [ユニ·チャーム]»
: 2022-12-27 08:30:55,375-update_cache[update_cache:90]
: INFO-Updated «SUZUKI MOTOR CORP»
: 2022-12-27 08:30:55,399-update_cache[update_cache:90]
: INFO-Updated «The Movie DB»
: 2022-12-27 08:30:55,403-update_cache[update_cache:90]
: INFO-Updated «Type Hinting in Python»
: 2022-12-27 08:31:05,866-update_cache[update_cache:123]
: INFO-Adding «My-TMDB»
: 2022-12-27 08:31:09,944-update_cache[update_cache:126]
: INFO-22 nodes changed
: 33979
: Task finished in 19.23s

* Zettelkasten speed
#+begin_src jupyter-python :async yes
def func():
    # pylint: disable=import-outside-toplevel
    from orgee_roam import ZettelKasten

    zk = ZettelKasten()


runf(func)  # pylint: disable=undefined-variable
#+end_src

#+RESULTS:
: 2022-12-28 13:38:56,075-update_cache[update_cache:110]
: INFO-a
: 2022-12-28 13:38:56,077-update_cache[update_cache:135]
: INFO-b
: 2022-12-28 13:38:56,078-update_cache[update_cache:137]
: INFO-1 node changed
: Task finished in 4.09s

* Add zettel
#+begin_src jupyter-python :async yes
def func():
    # pylint: disable=import-outside-toplevel
    from orgee_roam import ZettelKasten

    zk = ZettelKasten()
    z = zk.make_zettel(title="My testo")
    print(z)


runf(func)  # pylint: disable=undefined-variable
#+end_src

#+RESULTS:
: 2022-12-27 08:31:42,445-make_zettel[make_zettel:90]
: INFO-Created file /home/chunglak/zettelkasten/20221227083142-my-testo.org for node My testo
: Zettel(uuid='3306eb54-f81f-41cc-946d-e8cdfee09acb', title='My testo', filename='/home/chunglak/zettelkasten/20221227083142-my-testo.org', updated_ts=1672097502.4475112, lastchecked_ts=1672097502.4475112, zettel_hash='6cbfb6a83fdfc3ffc6cfba1f1048eede916c9f1a04c1095286bfb0fb3502edc6', level=0, lineno=1, tags=set(), all_tags=set(), aliases=set(), olp=['My testo'], properties=[('ID', '3306eb54-f81f-41cc-946d-e8cdfee09acb'), ('CREATED_TS', '1672097502')])
: Task finished in 3.75s

* Make finder
#+begin_src jupyter-python :async yes
def func():
    # pylint: disable=import-outside-toplevel
    from orgee_roam import ZettelKasten

    zk = ZettelKasten()
    zk.make_finder_files()


runf(func)  # pylint: disable=undefined-variable
#+end_src

#+RESULTS:
: 2022-12-27 08:32:09,877-make_zettel[make_zettel:90]
: INFO-Created file /home/chunglak/zettelkasten/zettel-finder-new.org for node Nodes by updated timestamp (33980 zettels)
: 2022-12-27 08:32:15,325-list_zettel[make_list_zettel:49]
: INFO-Saved 33980 links to /home/chunglak/zettelkasten/zettel-finder-new.org
: 2022-12-27 08:32:15,340-make_zettel[make_zettel:90]
: INFO-Created file /home/chunglak/zettelkasten/zettel-finder-restricted-new.org for node Restricted nodes by updated timestamp (3998 zettels)
: 2022-12-27 08:32:18,411-list_zettel[make_list_zettel:49]
: INFO-Saved 3998 links to /home/chunglak/zettelkasten/zettel-finder-restricted-new.org
: Task finished in 9.79s

* OrgNode2
#+begin_src jupyter-python :async yes
def func():
    # pylint: disable=import-outside-toplevel
    from orgee import OrgNode

    fn = "/home/chunglak/monobox/zettel/20220819134353-enum.org"

    node = OrgNode.from_file(fn)
    print(node.children)


runf(func)  # pylint: disable=undefined-variable
#+end_src

#+RESULTS:
: [<orgee.orgnode2.OrgNode object at 0x7f1ad85e5a20>, <orgee.orgnode2.OrgNode object at 0x7f1ad85e54e0>, <orgee.orgnode2.OrgNode object at 0x7f1ad85e6ef0>, <orgee.orgnode2.OrgNode object at 0x7f1ad85e6470>, <orgee.orgnode2.OrgNode object at 0x7f1ad85e69e0>]
: Task finished in 0.00s

* Func
#+begin_src jupyter-python :async yes
def func():
    # pylint: disable=import-outside-toplevel
    pass


runf(func)  # pylint: disable=undefined-variable
#+end_src
